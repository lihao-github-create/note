# 数据结构应用

## 题目一

题目描述：记录为{key,value,ttl}。ttl从1-8600变化。每插入一条记录，如果key存在，则比较ttl，并按ttl大小进行更新。同时以当前插入时间为基准，定期删除过期数据，比如50s。

可以采用“双向链表+哈希表”两个数据结构。双向链表中的每个节点包含key, value, ttl,和insert_time。哈希表中每个节点包含key，pointer, 其中pointer指向key所在双向链表的节点。

- 在插入一条记录{key,value,ttl}时：
  - 根据 key 在哈希表判断是否存在，若不存在直接插入。定位到之前插入的节点，将 ttl和该节点中的 ttl 进行比较，如果较新，则进行如下更新操作：删除老的节点，将新的节点插入到链表尾部，然后更新哈希表中 key 对应的 pointer。
  - 总体操作复杂度为 O(1)
- 周期性去除老数据
  - 因为数据在双向链表中是按插入时间有序存储的。所以可以依次遍历链表中的节点，根据插入时间判断，是否超时，如果删除，则将其删除。
  - 在删除链表节点的同时，也需要根据 key 将其从哈希表中进行删除。
  - 总体操作复杂度为 O(1)
